<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>kmyk/online-judge-verify-script</title>
</head>

<body>
    <main>
        <h1><code>online-judge-verify-script</code> を簡単にインストールできる Web ページ</h1>
        <p>
            手順:
        </p>
        <ol>
            <li>
                <form>
                    <label>あなたの競プロライブラリの GitHub のレポジトリの URL を入れてね: </label><input type="text" id="input"
                        placeholder="https://github.com/beet-aizu/library" value="https://github.com/beet-aizu/library" size="48">
                </form>
            </li>
            <li>
                開く: <a id="output" target="_blank"></a>
            </li>
            <li>
                開いたページの下の方にある緑の Commit new file ボタンを押す
            </li>
            <li>
                <a href="https://github.com/kmyk/online-judge-verify-helper/blob/master/example.test.cpp">example.test.cpp</a> のように <code>#define PROBLEM "https://..."</code> が書かれている <code>hoge.test.cpp</code> のようなファイル名の C++ コードを追加する
                (<a id="output2" target="_blank">例を自動で追加するリンク</a>)
            </li>
            <li>
                <a id="output3">GitHub Actions</a> のページから結果を確認する
            </li>
        </ol>
    </main>

    <script>
        const input = document.getElementById("input");
        const output = document.getElementById("output");
        const output2 = document.getElementById("output2");
        const output3 = document.getElementById("output3");
        function update() {
            if (input.value.match(/\/github.com\/[^\/]+\/[^\/]+/)) {
                const url = input.value.replace(/\/$/, "") + "/new/master";
                const filename = ".github%2Fworkflows%2Fverify.yml"
                const value = "name%3A%20verify%0A%0Aon%3A%0A%20%20push%3A%0A%20%20%20%20branches%3A%0A%20%20%20%20-%20master%0A%0Ajobs%3A%0A%20%20build%3A%0A%0A%20%20%20%20runs-on%3A%20ubuntu-latest%0A%0A%20%20%20%20steps%3A%0A%20%20%20%20-%20uses%3A%20actions%2Fcheckout%40v1%0A%0A%20%20%20%20-%20name%3A%20Set%20up%20Python%0A%20%20%20%20%20%20uses%3A%20actions%2Fsetup-python%40v1%0A%0A%20%20%20%20-%20name%3A%20Install%20dependencies%0A%20%20%20%20%20%20run%3A%20pip3%20install%20-U%20git%2Bhttps%3A%2F%2Fgithub.com%2Fkmyk%2Fonline-judge-verify-helper%0A%0A%20%20%20%20-%20name%3A%20Run%20tests%0A%20%20%20%20%20%20run%3A%20oj-verify%20run";
                output.href = url + "?filename=" + filename + "&value=" + value;
                output.textContent = url + "&value=...";

                const filename2 = "example.test.cpp";
                const value2 = "%23define%20PROBLEM%20%22https%3A%2F%2Fonlinejudge.u-aizu.ac.jp%2Fcourses%2Flesson%2F1%2FALDS1%2F4%2FALDS1_4_B%22%0A%23include%20%3Calgorithm%3E%0A%23include%20%3Ciostream%3E%0A%23include%20%3Cvector%3E%0A%23define%20REP%28i%2C%20n%29%20for%20%28int%20i%20%3D%200%3B%20%28i%29%20%3C%20%28int%29%28n%29%3B%20%2B%2B%20%28i%29%29%0A%23define%20ALL%28x%29%20std%3A%3Abegin%28x%29%2C%20std%3A%3Aend%28x%29%0Ausing%20namespace%20std%3B%0A%0Aint%20main%28%29%20%7B%0A%20%20%20%20int%20n%3B%20cin%20%3E%3E%20n%3B%0A%20%20%20%20vector%3Cint%3E%20s%28n%29%3B%0A%20%20%20%20REP%20%28i%2C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20cin%20%3E%3E%20s%5Bi%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20int%20q%3B%20cin%20%3E%3E%20q%3B%0A%20%20%20%20int%20cnt%20%3D%200%3B%0A%20%20%20%20while%20%28q%20--%29%20%7B%0A%20%20%20%20%20%20%20%20int%20t_i%3B%20cin%20%3E%3E%20t_i%3B%0A%20%20%20%20%20%20%20%20cnt%20%2B%3D%20binary_search%28ALL%28s%29%2C%20t_i%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20cout%20%3C%3C%20cnt%20%3C%3C%20endl%3B%0A%20%20%20%20return%200%3B%0A%7D";
                output2.href = url + "?filename=" + filename2 + "&value=" + value2;

                output3.href = input.value.replace(/\/$/, "") + "/actions?query=workflow%3Averify";
            }
        }
        input.addEventListener('change', update);
        input.addEventListener('keyup', update);
        update();
    </script>
</body>

</html>
